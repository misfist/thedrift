{"version":3,"file":"wpfs.js","mappings":";;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC","sources":["webpack://the-drift/./src/js/plugins/wpfs.js"],"sourcesContent":["(function( $ ) {\n\n    /**\n     * Wrap desciption text in span tag so we can style as designed\n     */\n    const form = $( '.wpfs-form' );\n    if( ! form ) {\n        return;\n    }\n\n    const formType = form.data( 'wpfs-form-type' );\n    const fieldNodes = $( '.wpfs-form-check-group .wpfs-form-check' );\n\n    console.log( $( '.wpfs-billing-address-switch' ), $( '.wpfs-shipping-address-switch' ) );\n\n    if( fieldNodes ) {\n\n        const replacementBillingText = 'Billing address';\n        const replacementShippingText = 'Shipping address';\n    \n        const billingEl = $( '[for^=\"wpfs-billing-address-line-1\"]' );\n        const shippingEl = $( '[for^=\"wpfs-shipping-address-line-1\"]' );\n    \n        if( 'inline_subscription' === formType ) {\n            formatSubscriptions();\n        }\n\n        if( 'inline_payment' === formType ) {\n            formatPayments();\n            moveCustomAmountField();\n        }\n\n        if( billingEl ) {\n            billingEl.text( replacementBillingText );\n        }\n        if( shippingEl ) {\n            shippingEl.text( replacementShippingText );\n        }\n    }\n\n    function formatSubscriptions() {\n        fieldNodes.each( function() {\n            const $input = $( this ).find( 'input' );\n            const $label = $( this ).find( '.wpfs-form-check-label' );\n            const $amount =  $input.data( 'wpfs-plan-amount' );\n            const $currency = $input.data( 'wpfs-currency' );\n            const $planName = $input.data( 'wpfs-plan-name' );\n\n            const amount = new Intl.NumberFormat( 'en-US', { \n                style: 'currency', \n                currency: $currency,\n                minimumFractionDigits: 0,\n                maximumFractionDigits: 2\n            } ).format( $amount );\n\n            const $description = '<span class=\"constrained\">' + $planName + '</span>';\n            const $price = '<strong>' + amount + '</strong>';\n            $label.html( $description + $price );\n        } );\n    }\n\n    function formatPayments() {\n        fieldNodes.each( function() {\n            const $input = $( this ).find( 'input' );\n            const $label = $( this ).find( '.wpfs-form-check-label' );\n            const $description =  $input.data( 'wpfs-amount-description' );\n\n            $label.html( $description );\n        } );\n    }\n\n    function moveCustomAmountField() {\n        const parent = document.querySelector(`.wpfs-form-check-group`);\n        const field = document.querySelector(`[data-wpfs-amount-row='custom-amount']`);\n\n        if( parent && field ) {\n            parent.insertAdjacentHTML( 'beforeend', field.outerHTML );\n            field.remove();\n        }\n    }\n\n})( jQuery );\n"],"names":[],"sourceRoot":""}